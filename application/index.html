<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>MinnPost</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script type="text/javascript">var _sf_startpt=(new Date()).getTime()</script>
<link rel="shortcut icon" href="http://www.minnpost.com//sites/default/themes/siteskin/favicon.ico" type="image/x-icon" />
<meta name="keywords" content="Mark Dayton,Minnesota DFL,Minnesota GOP,Minnesota Legislature,Vikings Stadium,Voter ID Amendment" />
<meta name="description" content="  " />
<meta property="og:title" content="The 2012 Legislative session: What did they pass?"/>
<meta property="og:site_name" content="MinnPost"/>
<meta property="og:description" content="Explore bills by category, investigate which bills Gov. Dayton vetoed, and search by your legislators.
"/>
<meta property="og:image" content="http://www.minnpost.com/sites/default/files/images/thumbnails/fullpagearticles/BillExplorerGraphic3.png"/>
<link rel="apple-touch-icon" href="http://www.minnpost.com//sites/default/themes/siteskin/inc/images/apple-touch-icon.png" />
<meta name="viewport" content="width=device-width, initial-scale=1"></meta>


  <link type="text/css" rel="stylesheet" media="all" href="http://www.minnpost.com/sites/default/files/css/css_cc2732a55db9703697ac738883d915c9.css" />
<link type="text/css" rel="stylesheet" media="screen" href="http://www.minnpost.com/sites/default/files/css/css_b26ad2d81bc74f1246e9c9a4c45ecdea.css" />
<link type="text/css" rel="stylesheet" media="print" href="http://www.minnpost.com/sites/default/files/css/css_cd72d16d00ebb27825710d934e28fbe8.css" />
  <!--[if IE]>
      <link rel="stylesheet" href="http://www.minnpost.com/sites/default/themes/derma/inc/css/ie.css?n" type="text/css">
  <![endif]-->
    <script type="text/javascript" src="http://www.minnpost.com/sites/default/files/js/js_ecc28eff7a7d5d5580a845c7f68983c9.js"></script>
    

</head>
<body class="not-front logged-in page-node node-type-article one-sidebar sidebar-right admin-nw admin-vertical admin-df  section-data section-data-id-2012 section-data-id-2012-id-05 section-data-id-2012-id-05-how-we-built-legislative-bill-explorer one-sidebar sidebar-right">
<div class="outside-embeddable-container">



  <!-- START: Embeddable -->
  <div class="node-body fieldlayout node-field-body">
    <style type="text/css">
      /* @import url(''); */
    </style>
    
    <style type="text/css">
      #minnpost-GRAD-math-test {
        max-width: 960px;
        margin: 0 auto;
      }
      .clear {
        clear: both;
      }
      .js-dependent,
      .hidden {
        display: none;
      }
      .footnote {
        font-size: .75em;
        font-style: italic;
        color: #414141;
        margin-top: 3em;
        border-top: 1px solid #BCBCBC;
        padding-top: 1em;
      }
      .loading-general {
        width: 100%;
        text-align: center;
        padding: 2em 2em;
        color: #ABABAB;
        vertical-align: middle;
        height: 100%;
        line-height: 100%;
      }
      .loading-general span {
        padding: 10px 5px 10px 40px;
        background: transparent url('https://s3.amazonaws.com/data.minnpost/projects/2012-mn-election-results/images/ajax-loader.gif') center left no-repeat;
        vertical-align: middle;
        height: 100%;
        line-height: 100%;
      }
      
      .test-status {
        margin-bottom: 1em;
      }
      .test-status a {
        display: block;
        float: left;
        width: 2em;
        height: 2em;
        margin: 0 .25em 0.25em 0;
        border: 1px solid #BDBDBD;
        text-align: center;
        font-weight: bold;
      }
      .test-status a.correct {
        border-color: green;
      }
      .test-status a.incorrect {
        border-color: red;
      }
      .test-status a.selected {
        background-color: #CDCDCD;
      }
      
      .question-image {
        max-width: 40%;
        float: left;
        margin: 0 1em 1em 0;
        display: block;
      }
      
      /**
       * Responsive creen size styles
       */
      @media screen and (max-width: 768px) {
      }
    </style>
    
    <!--[if lte IE 7]>
      <style type="text/css">
        .ie-upgrade-note {
          font-size: 90%;
          background-color: #DCDCDC;
          border: 1px solid #A2A2A2;
          padding: 1em;
          margin: 1em 0 2em 0;
        }
      </style>
    <![endif]-->
    
    
    <!-- Initial HTML for application -->
    <div id="minnpost-GRAD-math-test">
      <noscript>
        <p>This application requires Javascript which is used to make your web browser more interactive.  If this message does not go away, please consider enabling Javascript.  Here are <a href="http://www.enable-javascript.com/" target="_blank">instructions on how to enable JavaScript in your web browser</a>.</p>
      </noscript>
      
      <!--[if lte IE 7]>
        <div class="ie-upgrade-note">
          <h4>Consider upgrading your browser</h4>
          <p>Your <strong>Internet Browser</strong> is the application you use to navigate webpages on the internet.  You are currently using an older version of Internet Explorer.  Unfortunately, with this old browser, you will not be able to experience the full version of this interactive story.</p>
          
          <p><a href="http://browsehappy.com/" target="_blank">Click here to find out about options for newer browsers</a>.</p>
        
          <p>If you cannot install new applications on your computer (because you are at work, for example), consider using <a href="http://www.google.com/chromeframe" target="_blank">Google's Chrome Frame</a> for Internet Explorer.</p>
        </div>
        
        <div>
          <p>The following is a snapshot of the interactive application:</p>
          <img src="https://s3.amazonaws.com/data.minnpost/projects/minnpost-2012-election-state-leg-change/images/2011-2013-leg-change.jpeg" />
      <![endif]-->
      
      <div id="application-container" class="clear-block">
      </div>
      
      <p class="footnote"> <a href="http://www.leg.state.mn.us/" target="_blank">MN State Legislature</a>.</p>
    </div>
    
    
    <!-- Templates to be used in client side processing. -->
    <script id="template-test-container" type="text/template">
      <div class="test-container">
        <h3>Test</h3>
        <div class="test-status-container"></div>
        <div class="question-container"></div>
      </div>
    </script>
    
    <script id="template-test-status" type="text/template">
      <div class="test-status clear-block">
        <% for (var c in collection) { %>
          <% var correctClass= (_.isUndefined(collection[c].correct)) ? 'unanswered' :
            ((collection[c].correct == true) ? 'correct' : 'incorrect'); %>
          <a class="<%= correctClass %> question-<%= collection[c].question %>" href="#question/<%= collection[c].question %>"><%= collection[c].question %></a>
        <% } %>
      </div>
    </script>
    
    <script id="template-test-start" type="text/template">
      <div class="test-start">
        <h1><a href="#question/1">Start!</a></h1>
      </div>
    </script>
    
    <script id="template-test-finish" type="text/template">
      <div class="test-finish">
        <h1>Yay!</h1>
        <a href="#question/22">Back</a>
      </div>
    </script>
    
    <script id="template-question" type="text/template">
      <div class="question">
        <h4>Question <%= question %></h4>
        
        <% if (question_image.indexOf('.png') > 0) { %>
          <img class="question-image" src="<%= question_image %>" />
        <% } %>
        <p><%= content %></p>
        
        <form class="question-answer-form">
          <% for (var a in answers) { %>
            <div>
              <input type="radio" id="question-<%= a %>" name="question-answer-input" value="<%= a %>" />
              <label for="question-<%= a %>">
                <% if (answers[a].indexOf('.png') > 0) { %>
                  <img class="answer-image" src="<%= answers[a] %>" />
                <% } else { %>
                  <%= answers[a] %>
                <% } %>
              </label>
            </div>
          <% } %>
          
          <div class="question-navigation">
            <input class="navigation-back" type="submit" value="Back" />
            <input class="navigation-next" type="submit" value="Next" />
          </div>
        </form>
      </div>
    </script>
    
    
    <!-- jQuery that is used on MinnPost site (ensures test environment) -->
    <script type="text/javascript">
      window.jQuery || document.write('<script type="text/javascript" src="https://s3.amazonaws.com/data.minnpost/js/jquery-1.3.2/jquery-1.3.2.min.js"><\/script>')
    </script>
    
    <!--[if lte IE 8]>
      <script type="text/javascript" src="https://s3.amazonaws.com/data.minnpost/js/es5-shim-master-20120801/es5-shim.min.js"></script>
    <![endif]-->
    
    <script type="text/javascript" src="https://s3.amazonaws.com/data.minnpost/js/underscore-1.3.3/underscore-min.js"></script>
    <script type="text/javascript" src="https://s3.amazonaws.com/data.minnpost/js/jquery-custom-master-20120606/jquery-1.7.2.custom.min.js"></script>
    <script type="text/javascript" src="https://s3.amazonaws.com/data.minnpost/js/backbone-0.9.2/backbone-min.js"></script>

    
    <script type="text/javascript">
      // Handle custom jQuery
      jQueryCustom = jQueryCustom.noConflict();
      Backbone.setDomLibrary(jQueryCustom);
      
      (function($, w, undefined) {
        var dataDir = './data/';
        var imagesDir = './images/';
        
        // Determine if we should use remore resources
        if (location.host.indexOf('localhost') === -1) {
          dataDir = 'https://s3.amazonaws.com/data.minnpost/projects/minnpost-GRAD-math-test/data/';
          imagesDir = 'https://s3.amazonaws.com/data.minnpost/projects/minnpost-GRAD-math-test/images/';
        }
        
        // Model for question
        var Question = Backbone.Model.extend({
          idAttribute: 'question',

          initialize: function() {
            this.set('answers', {
              'A': this.checkAnswerImage('answer_a'),
              'B': this.checkAnswerImage('answer_b'),
              'C': this.checkAnswerImage('answer_c'),
              'D': this.checkAnswerImage('answer_d'),
            });
            this.set('question_image', imagesDir + this.get('question_image'));
          },
          
          checkAnswerImage: function(prop) {
            return this.get(prop).indexOf('.png') > 0 ?
              imagesDir + this.get(prop) : this.get(prop)
          },
          
          handleAnswer: function(answer) {
            this.set('answer', answer);
            this.set('correct', (answer == this.get('correct_answer')));
          }
        });
        
        // Collection test
        var Test = Backbone.Collection.extend({
          model: Question
        });
        
        // View for single question
        var QuestionView = Backbone.View.extend({
          template: $('#template-question').html(),
          
          events: {
            'click .navigation-back': 'questionSubmit',
            'click .navigation-next': 'questionSubmit'
          },
          
          initialize: function(options) {
          },
          
          render: function() {
            $(this.el).html(_.template(this.template, this.model.toJSON()));
            this.selectQuestion();
            return this;
          },
          
          selectQuestion: function() {
            $('.test-status a').removeClass('selected');
            $('.test-status a.question-' + this.model.get('question')).addClass('selected');
          },
          
          questionSubmit: function(e) {
            e.preventDefault();
            var $target = $(e.target);
            var answer = $('input[name=question-answer-input]:checked').val();
            var index = this.model.id;
            var routerOptions = { trigger: true };

            if (!_.isUndefined(answer)) {
              this.model.handleAnswer(answer);
            }

            if ($target.val() == 'Next') {
              this.options.router.navigate('question/' + (parseInt(index) + 1), routerOptions);
            }
            else {
              this.options.router.navigate('question/' + (parseInt(index) - 1), routerOptions);
            }
          }
        });
        
        // View for test
        var TestView = Backbone.View.extend({
          template: $('#template-test-container').html(),
          templateStart: $('#template-test-start').html(),
          templateFinish: $('#template-test-finish').html(),
          templateStatus: $('#template-test-status').html(),
          elQuestion: '.question-container',
          elStatus: '.test-status-container',
          
          initialize: function() {
            this.collection.bind('change', this.render, this);
          },
          
          render: function() {
            // Mark as rendered first time around.
            this.rendered = this.rendered || false;

            // Render template
            if (!this.rendered) {
              $(this.el).html(_.template(this.template, {}));
            }
            $(this.elStatus).html(_.template(this.templateStatus, {
              collection: this.collection.toJSON()
            }));
            
            this.rendered = true;
            return this;
          },
          
          renderStart: function() {
            $(this.elQuestion).html(_.template(this.templateStart, {}));
            return this;
          },
          
          renderFinish: function() {
            $(this.elQuestion).html(_.template(this.templateFinish, {}));
            return this;
          }
        });
        
        // Main router and workspace for actions
        var Workspace = Backbone.Router.extend({
          isAutoRefreshOn: false,
          
          routes: {
            'start': 'startTest',
            'finish': 'finishTest',
            'question/:question': 'showQuestion',
            '*default': 'defaultRoute'
          },
        
          initialize: function(options) {
            this.test = new Test(options.questions);
            this.testView = new TestView({ 
              el: '#application-container', 
              collection: this.test,
              router: this
            }).render();
          },
        
          defaultRoute: function() {
            this.navigate('/start', { trigger: true, replace: true });
          },
        
          startTest: function() {
            this.testView.renderStart();
          },
        
          finishTest: function() {
            this.testView.renderFinish();
          },
        
          showQuestion: function(question) {
            if (_.isUndefined(this.questionView)) {
              this.questionView = new QuestionView({ 
                el: this.testView.elQuestion,
                router: this
              });
            }
            
            this.currentQuestion = this.test.get(question);
            this.questionView.model = this.currentQuestion;
            this.questionView.render();
          }
        });

        
          
        // When ready, make the magic happen
        $(document).ready(function() {
          window.grad_callback = function(data) {
            // Start application
            var workspace = new Workspace({ questions: data });
            Backbone.history.start();
          };
          $.ajax({
            type: 'GET',
            dataType: 'jsonp',
            url: dataDir + 'questions.jsonp?callback=grad_callback',
            jsonp: 'callback'
          });
        });
      })(jQueryCustom, window);
    </script>
  </div>
  <!-- END: Embeddable -->



</div>
</body>
</html>